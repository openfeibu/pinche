!function(){function a(a){if(!window.androidclient){if(window.WebViewJavascriptBridge)return a(WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",function(e){a(WebViewJavascriptBridge)},!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(a);window.WVJBCallbacks=[a];var e=document.createElement("iframe");e.style.display="none",e.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)}}magpay={},magpay.VERSION="1.0",window.magpay=magpay,magpay.callbacks={},a(function(a){if(a.init&&"function"==typeof a.init)try{a.init(function(a,e){})}catch(a){}a.registerHandler("mappayJsCallBack",function(a,e){var n=JSON.parse(a),i=n.id,t=n.val,c=magpay.callbacks[i];c&&(c.type&&"json"==c.type&&(t=JSON.parse(t)),c.success(t))})}),magpay.iosConnect=a,magpay.jsCallBack=function(a,e){var n=magpay.callbacks[a];n&&(n.type&&"json"==n.type&&(e=JSON.parse(e)),n.success(e))},magpay.wxpay=function(e,n,i){magpay.callbacks.wxpaySuccess={type:"",success:n},magpay.callbacks.wxpayOnFail={type:"",success:i};var t=JSON.stringify(e);window.magpayclient&&window.magpayclient.wxpay(t),a(function(a){a.callHandler("magpaywxpay",t,function(a){})})},magpay.alipay=function(e,n,i){magpay.callbacks.alipaySuccess={type:"",success:n},magpay.callbacks.alipayOnFail={type:"",success:i};var t=JSON.stringify(e);window.magpayclient&&window.magpayclient.alipay(t),a(function(a){a.callHandler("magpayalipay",t,function(a){})})};var e=function(a,e,n){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appid,timeStamp:a.timeStamp+"",nonceStr:a.noncestr,package:a.package_,signType:"MD5",paySign:a.sign},function(a){"get_brand_wcpay_request:ok"==a.err_msg?"function"==typeof e&&e():n&&"function"==typeof n?n():alert("支付失败")})};magpay.wxjspay=function(a,n,i){if("undefined"==typeof WeixinJSBridge){if(document.addEventListener){var t=layer.open({type:2,shadeClose:!1});document.addEventListener("WeixinJSBridgeReady",function(){layer.close(t),e(a,n,i)},!1)}else if(document.attachEvent){var t=layer.open({type:2,shadeClose:!1});document.attachEvent("WeixinJSBridgeReady",function(){layer.close(t),e(a,n,i)}),document.attachEvent("onWeixinJSBridgeReady",function(){layer.close(t),e(a,n,i)})}}else e(a,n,i)}}();