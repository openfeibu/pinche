!function(){function t(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}function e(){var t=navigator.userAgent.toLowerCase(),e=t.indexOf("micromessenger")!=-1;return e}function i(){var t={isMagAndroid:!1,isMagIos:!1};return window.androidclient&&(t.isMagAndroid=!0),mag.iosConnect(function(e){t.isMagIos=!0}),t}var a="",n=e(),s=i();new Vue({el:"#stickInfo",data:{id:null,stick_price:10,stick_time:6},created:function(){var e=this;e.id=t("id"),$.ajax({url:a+"/carpool/carpool/getTopDayCost",method:"GET",data:{},success:function(t){e.stick_price=t.data}})},methods:{showSelectInfo:function(){$(event.target).parent().addClass("selected").siblings().removeClass("selected")},submitStick:function(){var t=this;if(t.id&&t.stick_time){layer.open({type:2,shadeClose:!1});var e=2;e=n?3:s.isMagAndroid||s.isMagIos?2:5,$.ajax({url:a+"/carpool/carpool/createTopOrder",method:"POST",data:{id:t.id,hour:t.stick_time,paySource:e},success:function(t){if(t.success){var i=t.data;2==e?magpay.wxpay({paydata:JSON.stringify(i)},function(){window.location="stick-success.html"},function(){alert("付款失败")}):3==e&&magpay.wxjspay(i,function(){window.location="stick-success.html"},function(){alert("支付失败")})}else layer.open({content:t.msg,skin:"msg",time:5})}})}}}})}();