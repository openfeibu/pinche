!function(){"use strict";function o(o){n.postCarpoolInfo.name&&n.postCarpoolInfo.phone&&n.postCarpoolInfo.user_count&&n.postCarpoolInfo.from_place&&n.postCarpoolInfo.to_place&&n.postCarpoolInfo.start_time?n.formValidation=!0:n.formValidation=!1}function t(o){var t=new RegExp("(^|&)"+o+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}var a="",n=new Vue({el:"#editPost",data:{postCarpoolInfo:{name:null,phone:null,user_count:1,type:1,from_place:null,to_place:null,start_time:null,car:null,mid_place:null,note:null},formValidation:!1},created:function(){var o=this,n=t("id");$.ajax({url:a+"/carpool/carpool/getCarpool",method:"GET",data:{id:n},success:function(t){t.success&&(o.postCarpoolInfo=t.data,o.postCarpoolInfo.start_time=t.data.startTimeDateStr+"T"+t.data.startTimeTimeStr)}})},methods:{postData:function(t){var n=this;o(t),this.formValidation?$.ajax({url:a+"/carpool/carpool/editCarpool",method:"POST",data:n.postCarpoolInfo,success:function(o){window.location="my-posted.html"}}):layer.open({content:"发布信息不完整",skin:"msg",time:2})}}})}();